This package consists of files in several directories:

This is out of date

    main:  contains all the source files
    xsd:   contains makexsdfiles and the xsd files created from same
    tex:   contains maketexfiles, maketexdoc, and the tex, ps and pdf files
           created by these scripts

    Prerequisites:  
                    The python programs all require a pythnon 2.7
                    installation with the lxml package installed.
                    The intention is to make all programs work with
                    both 2.7 and 3.5; this is not quite ready

                    The maketexfiles programs require the python
                    programs and a working latex installation with
                    dvips and dvipdfm

    Installing the python lxml package:
        The easiest way is to build it from source

        1) obtain the python lxml source tarball 
        2) untar the source
        3) run "python setup.py install"

        This is a standard python setup.py file.  

          
                

=====================================================================
The contents of the xsd directory:

    submit.xsd
    submithuman.xsd   two xsd files which both validate submissions

    distrib.xsd
    distribhuman.xsd  two xsd files which both validate distributions

    general.xsd
    generalhuman.xsd  two xsd files which both validate any valid ades file

=====================================================================

The contents of the tex directory:

    ades.ps    Postscript file from ades.tex
    ades.pdf   PDF file from ades.tex

    ades.tex                Latex source for above from xslt
    grouptypestable.tex       included file
    elementstable.tex         included file
    simpletypestable.tex      included file
    

=====================================================================

The contents of the main directory:

1) A master ADES file

   This is an xml file containing a description of the
   formats and rules.   It is transformed by supplied
   xslt files into various xsd files used to validate
   data submissions and interface, tex files to create
   documentation, and eventually python scripts and 
   C programs to parse and transform psv files and older
   mpc format files.

   The master file the xml file  "adesmaster.xml".

2) XSLT files to create xsd files

   There are six xslt files which create xsd file for
   validating interchange xml.   They come in pairs,
   one of which makes a macine-readable xsd file and the
   other which inserts comments and formatting to create
   a more human-readable xsd file.  Both the xsd files
   validate the same xml files and may be used interchangeably.

   a) submit

      submitxsd.xslt 
      submithumanxsd.xslt 

      makes an xsd file to validate submissions.  Submissions
      follow slightly different and more restrictive rules
      than distributions.  Anything submitted to the MCP should
      validate with a submit xsd file.

   b) distrib

      distribxsd.xslt
      distribhumanxsd.xslt

      makes an xsd file to validate MPC distributions.  There are
      certain fields which can only appear in MPC distributions and
      not submissions, and certain things MPC must add.

   c) general
  
      generalxsd.xslt
      generalhumanxsd.xslt

      makes an xsd file which validates both submit and distrib files
      as well as sensible things which don't quite follow either set 
      of rules.


3) XSLT files to make latex documentation

   These transform the master ADES file into latex documents and tables.
   Right now there are four different xslt files makeing for different 
   tex files, three of which are included in the remaining one.

   This means the documentation matches exactly the xsd files, since 
   they both use the same machine-readable format description


4) Python scripts for some simple tasks:

   a) ./xit.py inputxml inputxslt

      This script reads an input xml file (such as adesmaster.xml) 
      and transforms it with inputxslt, writing the result on stdout.

      Example:  ./xit.py adesmaster.xml submitxsd.xslt > submit.xsd
                creates an xsd file to validate submissions

                ./xit.py adesmaster.xml submithumanxsd.xslt > submithuman.xsd
                creates an xsd file to validate submissions that contains 
                extra comments and better formatting to imporove human 
                comprehension.
  
   b) ./validate.py <schema> <xml file>

      This script validates an xml file agains a schema.  If the xml file 
      ocrrectly validates, it just returns.  If not, it prints the reason
      the xsd validation failed.

      Example: ./validate submit.xsd goodsubmit.xml


   c) ./valit.py <master xml> <xslt> <xml file>

      All in one step, this script reads in <master xml> 
      transforms it with <xslt>, and applies that transfomred file
      as a schema to <xml file>.   

      Example: ./valit.py adesmaster.xml  submitxsd.xslt  goodsubmit.xml
               

   d) ./valall.py <xml file>

      This script runs the ./valit.py validation over all six supplied
      xslt files (the names are hard-coded in the script) and says which
      ones pass.   One normally expects either the submit or distrib 
      validation to fail, the other to be good, and the general to be good.
     
      Example: ./valall.py goodsubmit.xml

      Of course, this makes everything fail:
               ./valall.py badsubmit.xml

5) A csh script for making and running latex files

      This script, maketexfiles, is the folllowing:

         #!/bin/csh -f
         rm *tex *aux *dvi *ps *pdf *log
         foreach table ( elementstable simpletypestable grouptypestable ades )
         ./xit.py adesmaster.xml doc{$table}.xslt > {$table}.tex
         end
         
         latex ades.tex
         latex ades.tex
         dvips ades.dvi
         dvipdfm ades.dvi

      This requires latex, dvips and dvipdfm to be in the path.  

=====================================================================
